<div class="mb-4">
  <h1 class="mb-0"><%= t("admin.tokens.show.title", id: @token.id) %></h1>
  <%= render(Admin::ShowActionsComponent.new(
    back_path: admin_tokens_path,
    actions: [{ path: admin_user_path(@token.user), label: t("admin.tokens.columns.user") }]
  )) %>
</div>

<%= render(Admin::DetailsTableComponent.new(sections: [
  {
    title: t("admin.shared.details"),
    rows: [
      [t("admin.shared.id"), @token.id, { copyable: true }],
      [t("admin.tokens.columns.user"), link_to(@token.user.email, admin_user_path(@token.user)), { copyable: @token.user.email }],
      [t("admin.tokens.columns.purpose"), content_tag(:code, @token.purpose), { copyable: @token.purpose }],
      [t("admin.tokens.columns.token_last_4"), content_tag(:code, @token.token_last_four), { copyable: @token.token_last_four }],
      [t("admin.admin_sessions.columns.expires_at"), l(@token.expires_at), { copyable: true }],
      [t("admin.admin_sessions.columns.expired"), @token.expired? ? t("admin.shared.yes") : t("admin.shared.no")],
      [t("admin.tokens.columns.token_digest"), content_tag(:code, truncate(@token.token_digest, length: 16), class: "small", title: @token.token_digest), { copyable: @token.token_digest }],
      [t("admin.shared.created"), l(@token.created_at), { copyable: true }],
      [t("admin.shared.updated"), l(@token.updated_at), { copyable: true }],
    ],
  },
])) %>
<% if @token.data.present? %>
  <%= render(Admin::DetailsTableComponent.new(sections: [
    {
      title: t("admin.codes.sections.data"),
      rows: [[-> { content_tag(:pre, JSON.pretty_generate(@token.data), class: "mb-0 bg-light p-3 rounded small") }]],
    },
  ])) %>
<% end %>
